later=function(){var e={version:"0.1.0"};return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var a=0;if(arguments.length>1&&(a=Number(arguments[1]),a!=a?a=0:0!=a&&1/0!=a&&a!=-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a)))),a>=n)return-1;for(var r=a>=0?a:Math.max(n-Math.abs(a),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.constraint={priority:["Y"]},e.constraint.h=function(t){function n(t,n,a){var s=e.option.UTC;r=n.Y||(n.Y=s?t.getUTCFullYear():t.getFullYear()),u=n.M||(n.M=s?t.getUTCMonth():t.getMonth()),o=n.D||(n.D=s?t.getUTCDate():t.getDate()),i=n.h||(n.h=s?t.getUTCHours():t.getHours()),d=a?e.range.prev:e.range.next,f=a?e.date.prev:e.date.next}var a,r,u,o,i,d,f;return{value:function(e){return n(e,{}),i},isInvalid:function(e,s,v){return n(e||new Date,v||{},s),(a=d(i,t,24))!==i?f(r,u,o,a):!1},isValid:function(d,s,v){return n(d||new Date,v||{},s),(a=e.range.invalid(i,t,0,23,24,!1,s))!==!1?void 0===a?void 0:f(r,u,o,a):!1}}},e.constraint.m=function(t){function n(t,n,a){var v=e.option.UTC;r=n.Y||(n.Y=v?t.getUTCFullYear():t.getFullYear()),u=n.M||(n.M=v?t.getUTCMonth():t.getMonth()),o=n.D||(n.D=v?t.getUTCDate():t.getDate()),i=n.h||(n.h=v?t.getUTCHours():t.getHours()),d=n.m||(n.m=v?t.getUTCMinutes():t.getMinutes()),f=a?e.range.prev:e.range.next,s=a?e.date.prev:e.date.next}var a,r,u,o,i,d,f,s;return{value:function(e){return n(e,{}),d},isInvalid:function(e,v,l){return n(e||new Date,l||{},v),(a=f(d,t,60))!==d?s(r,u,o,i,a):!1},isValid:function(f,v,l){return n(f||new Date,l||{},v),(a=e.range.invalid(d,t,0,59,60,!1,v))!==!1?void 0===a?void 0:s(r,u,o,i,a):!1}}},e.constraint.M=function(t){function n(t,n,a){var d=e.option.UTC;r=n.Y||(n.Y=d?t.getUTCFullYear():t.getFullYear()),u=n.M||(n.M=d?t.getUTCMonth():t.getMonth()),o=a?e.range.prev:e.range.next,i=a?e.date.prev:e.date.next}var a,r,u,o,i;return{value:function(e){return n(e,{}),u},isInvalid:function(e,d,f){return n(e||new Date,f||{},d),(a=o(u+1,t,12))!==u+1?i(r,a-1):!1},isValid:function(o,d,f){return n(o||new Date,f||{},d),(a=e.range.invalid(u+1,t,1,12,12,!0,d))!==!1?void 0===a?void 0:i(r,a-1):!1}}},e.constraint.s=function(t,n,a){var r,u,o=e.range,i=e.date.second,d=n?o.prev:o.next,f=n?o.prevInvalid:o.nextInvalid,s=n?i.prev:i.next;return{isInvalid:function(e){return u=lsd.value(e,a),(r=d(u,t,i.offset))!==u?s(e,r,a):!1},isValid:function(e){return u=lsd.value(e,a),(r=f(u,t,i.extent,i.offset))!==!1?r?s(e,r,a):void 0:!1}}},e.constraint.t=function(t){function n(t,n,a){var c=e.option.UTC;r=n.Y||(n.Y=c?t.getUTCFullYear():t.getFullYear()),u=n.M||(n.M=c?t.getUTCMonth():t.getMonth()),o=n.D||(n.D=c?t.getUTCDate():t.getDate()),i=n.h||(n.h=c?t.getUTCHours():t.getHours()),d=n.m||(n.m=c?t.getUTCMinutes():t.getMinutes()),f=n.s||(n.s=c?t.getUTCSeconds():t.getSeconds()),s=n.t||(n.t=e.date.time(i,d,f)),v=a?e.range.prev:e.range.next,l=a?e.date.prev:e.date.next}var a,r,u,o,i,d,f,s,v,l;return{value:function(e){return n(e,{}),s},isInvalid:function(e,i,d){if(n(e||new Date,d||{},i),(a=v(s,t))!==s){var f=a.split(":"),c=i?a>s?-1:0:s>a?1:0;return l(r,u,o+c,f[0],f[1],f[2])}return!1},isValid:function(a,v,c){n(a||new Date,c||{},v);var y=s;if(t.indexOf(s)>-1){do f=v?f-1:f+1,-1===f?(f=59,d-=1):60===f&&(f=0,d+=1),-1===d?(d=59,i-=1):60===d&&(d=0,i+=1),-1===i?i=23:24===i&&(i=0),s=e.date.time(i,d,f);while(y!==s&&t.indexOf(s)>-1);return s===y?void 0:v?l(r,u,o-(s>y?1:0),i,d,f):l(r,u,o+(y>s?1:0),i,d,f)}return!1}}},e.constraint.ta=function(t){function n(t,n,l){var c=e.options.UTC;a=n.Y||(n.Y=c?t.getUTCFullYear():t.getFullYear()),r=n.M||(n.M=c?t.getUTCMonth():t.getMonth()),u=n.D||(n.D=c?t.getUTCDate():t.getDate()),o=n.h||(n.h=c?t.getUTCHours():t.getHours()),i=n.m||(n.m=c?t.getUTCMinutes():t.getMinutes()),d=n.s||(n.s=c?t.getUTCSeconds():t.getSeconds()),f=n.t||(n.t=e.date.time(o,i,d)),s=l?e.range.prev:e.range.next,v=l?e.date.prev:e.date.next}var a,r,u,o,i,d,f,s,v,l=t[0],c=l.split(":");return{value:function(e){return n(e,{}),f},isInvalid:function(e,t,o){return n(e||new Date,o||{},t),l>f?t?v(a,r,u-1):v(a,r,u,c[0],c[1],c[2]):!1},isValid:function(e,t,o){return n(e||new Date,o||{},t),f>=l?t?v(a,r,u,c[0],c[1],c[2]-1):v(a,r,u+1):!1}}},e.constraint.tb=function(t){function n(t,n,l){var c=e.options.UTC;a=n.Y||(n.Y=c?t.getUTCFullYear():t.getFullYear()),r=n.M||(n.M=c?t.getUTCMonth():t.getMonth()),u=n.D||(n.D=c?t.getUTCDate():t.getDate()),o=n.h||(n.h=c?t.getUTCHours():t.getHours()),i=n.m||(n.m=c?t.getUTCMinutes():t.getMinutes()),d=n.s||(n.s=c?t.getUTCSeconds():t.getSeconds()),f=n.t||(n.t=e.date.time(o,i,d)),s=l?e.range.prev:e.range.next,v=l?e.date.prev:e.date.next}var a,r,u,o,i,d,f,s,v,l=t[0],c=l.split(":");return{value:function(e){return n(e,{}),f},isInvalid:function(e,t,o){return n(e||new Date,o||{},t),f>=l?t?v(a,r,u,c[0],c[1],c[2]-1):v(a,r,u+1):!1},isValid:function(e,t,o){return n(e||new Date,o||{},t),l>f?t?v(a,r,u-1,c[0],c[1],c[2]-1):v(a,r,u,c[0],c[1],c[2]):!1}}},e.constraint.dw=function(t){function n(t,n,a){var s=e.option.UTC;r=n.Y||(n.Y=s?t.getUTCFullYear():t.getFullYear()),u=n.M||(n.M=s?t.getUTCMonth():t.getMonth()),o=n.D||(n.D=s?t.getUTCDate():t.getDate()),i=n.d||(n.d=s?t.getUTCDay():t.getDay()),d=a?e.range.prev:e.range.next,f=a?e.date.prev:e.date.next}var a,r,u,o,i,d,f;return{value:function(e){return n(e,{}),i},isInvalid:function(e,s,v){return n(e||new Date,v||{},s),(a=d(i+1,t,7))!==i+1?f(r,u,o+(a-1)-i):!1},isValid:function(d,s,v){return n(d||new Date,v||{},s),(a=e.range.invalid(i+1,t,1,7,7,!0,s))!==!1?void 0===a?void 0:f(r,u,o+(a-1)-i):!1}}},e.constraint.Y=function(t,n,a){var r,u,o=e.range,i=e.date.year,d=n?o.prev:o.next,f=n?o.prevInvalid:o.nextInvalid,s=n?i.prev:i.next;return{isInvalid:function(e){return u=i.value(e,a),(r=d(u,t))!==u?n?u>r?s(e,r):void 0:r>u?s(e,r):void 0:!1},isValid:function(e){return u=i.value(e,a),(r=f(u,t,i.extent(),i.offset()))!==!1?r?s(e,r):void 0:!1}}},e.constraint.dy=function(t){function n(e){return 1===new Date(Date.UTC(e,1,29)).getUTCMonth()?366:365}function a(e,t,n){var a=new Date(Date.UTC(e,0,1)).getTime(),r=new Date(Date.UTC(e,t,n)).getTime();return Math.ceil(r-a)/p+1}function r(){var t=e.option.UTC,n=c(i,0,o),r=0>o?o+v:o>v?o-v:o,u=a(t?n.getUTCFullYear():n.getFullYear(),t?n.getUTCMonth():n.getMonth(),t?n.getUTCDate():n.getDate());return r-u}function u(t,r,u){var o=e.option.UTC;i=r.Y||(r.Y=o?t.getUTCFullYear():t.getFullYear()),d=r.M||(r.M=o?t.getUTCMonth():t.getMonth()),f=r.D||(r.D=o?t.getUTCDate():t.getDate()),s=r.dy||(r.dy=a(i,d,f)),v=r.daysInYear||(r.daysInYear=n(i)),l=u?e.range.prev:e.range.next,c=u?e.date.prev:e.date.next}var o,i,d,f,s,v,l,c,y=1e3,h=60*y,g=60*h,p=24*g;return{value:function(e){return u(e,{}),s},isInvalid:function(e,n,a){return u(e||new Date,a||{},n),((o=l(s,t,v))||v)!==s?c(i,0,o+r()):!1},isValid:function(n,a,d){return u(n||new Date,d||{},a),(o=e.range.invalid(s,t,1,v,v,!0,a))!==!1?o?c(i,0,o+r()):void 0:!1}}},e.option={resolution:1,UTC:!0,maxYear:2050,minYear:2e3},e.dir={forward:0,reverse:1},e.compile=function(t){function n(n){var r=e.date.year.value(n)+a(t.aY),u=e.date.month.value(n)+a(t.aM),o=e.date.date.value(n)+Math.max(a(t.aD),a(t.ady),a(t.ad),7*a(t.awy),7*a(t.awm)),i=e.date.hour.value(n)+a(t.ah),d=e.date.minute.value(n)+a(t.am),f=e.date.second.value(n)+a(t.as);return e.date.next(r,u,o,i,d,f)}function a(e){return e&&e[0]?e[0]:0}var r=[],u=0,o=!1,i={};for(var d in t)if("a"===d[0]){o=!0;break}return e.constraint.priority.forEach(function(n){var a=t[n];a&&r.push([e.constraint[n](a,e.dir.forward,i),e.constraint[n](a,e.dir.reverse,i)])}),u=r.length,{getValid:function(e,t){for(var a=o&&!t?n(e):e,d=1e3,f=!1;!f&&a&&d--;){f=!0,i={};for(var s=0;u>s;s++){var v=r[s][t].isInvalid(a);if(v!==!1){a=v,f=!1;break}}}return d?a:null},getInvalid:function(e,t){for(var n=u-1;n>=0;n--){var a=r[n][t].isValid(e);if(a!==!1)return a}return e}}},e.schedule=function(t,n){function a(e,t){return t?new Date(e.getTime()-1e3*n):new Date(e.getTime()+1e3*n)}function r(e,t,n){return n?e.getTime()<t.getTime():e.getTime()>t.getTime()}function u(e,t,n){n.setMilliseconds(0);var a=i(e,t,n);return a?n.getTime()===a.getTime():!1}function o(e,t,n,r){var u;if(1===n)u=i(f,v,e,t,r);else for(u=[];n--;){var o=i(f,v,e,t,r);if(!o)break;u.push(o),e=a(o,r)}return u}function i(e,t,n,a,u){for(var o,i=n||new Date;i;){var f;if(e.length)for(var s=0,v=e.length;v>s;s++)f=e[s].getValid(i,u),!f||o&&!r(o,f,u)||(o=f);else o=i;if(i=null,o&&t.length&&(f=d(t,[],o,u),f.getTime()!==o.getTime()&&(i=f,o=void 0)),o&&a&&r(o,a,u)){o=void 0;break}}return o}function d(e,t,n,a){for(var o=n||new Date;o&&u(e,t,o);){for(var d,f,s=0,v=e.length;v>s;s++){var l=e[s].getInvalid(o,a);!l||f&&!r(l,f,a)||(f=l)}t.length&&(d=i(t,[],o,null,a)),o=f||d?new Date(f&&d?Math.min(f.getTime(),d.getTime()):d||f):void 0}return o}n=void 0===n?e.option.resolution:n;for(var f=[],s=t&&t.schedules?t.schedules.length:0,v=[],l=t&&t.exceptions?t.exceptions.length:0,c=0;s>c;c++)f.push(e.compile(t.schedules[c]));for(var y=0;l>y;y++)v.push(e.compile(t.exceptions[y]));return{isValid:function(e){return u(f,v,e)},next:function(e,t,n){return o(e,t,n||1,!1)},nextRange:function(e,t){var n=i(f,v,e,t,!1),a=d(f,v,n,!1);return[n,a]},prev:function(e,t,n){return o(e,t,n||1,!0)},prevRange:function(e){var t=i(f,v,e,null,!0),n=d(f,v,t,!0);return[t,n]}}},e.date={},e.date.constant={SEC:1e3,MIN:6e4,HOUR:36e5,DAY:864e5},e.date.next=function(t,n,a,r,u,o){var i=arguments.length;return n=2>i?0:n,a=3>i?1:a,r=4>i?0:r,u=5>i?0:u,o=6>i?0:o,e.option.UTC?new Date(Date.UTC(t,n,a,r,u,o)):new Date(t,n,a,r,u,o)},e.date.prev=function(t,n,a,r,u,o){var i=arguments.length;return n=2>i?11:n,a=3>i?new Date(Date.UTC(t,n+1,0)).getUTCDate():a,r=4>i?23:r,u=5>i?59:u,o=6>i?59:o,e.option.UTC?new Date(Date.UTC(t,n,a,r,u,o)):new Date(t,n,a,r,u,o)},e.date.day={extent:function(t,n){var a=n.daysInMonth||(n.daysInMonth=e.date.day.value(e.date.next(e.date.year.value(t,n),e.date.month.value(t,n)+1,0,12)));return[1,a]},offset:function(t,n){return e.date.day.extent(t,n)[1]},start:function(t,n){return n.dayStart||(n.dayStart=e.date.next(e.date.year.value(t,n),e.date.month.value(t,n),val))},end:function(t,n){return n.dayEnd||(n.dayEnd=e.date.prev(e.date.year.value(t,n),e.date.month.value(t,n),val))},value:function(t,n){return n.day||(n.day=e.option.UTC?t.getUTCDate():t.getDate())},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),n)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),n)}},e.date.second={extent:function(){return[0,23]},offset:function(){return 24},start:function(t,n){return n.hourStart||(n.hourStart=e.date.next(e.date.year.value(t,n),e.date.month.value(t,n),e.date.day.value(t,n),val))},end:function(t,n){return n.hourEnd||(n.hourEnd=e.date.prev(e.date.year.value(t,n),e.date.month.value(t,n),e.date.day.value(t,n),val))},value:function(t,n){return n.hours||(n.hours=e.option.UTC?t.getUTCHours():t.getHours())},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),n)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),n)}},e.date.second={extent:function(){return[0,59]},offset:function(){return 60},start:function(t,n){return n.minuteStart||(n.minuteStart=e.date.next(e.date.year.value(t,n),e.date.month.value(t,n),e.date.day.value(t,n),e.date.hour.value(t,n),val))},end:function(t,n){return n.minuteEnd||(n.minuteEnd=e.date.prev(e.date.year.value(t,n),e.date.month.value(t,n),e.date.day.value(t,n),e.date.hour.value(t,n),val))},value:function(t,n){return n.minutes||(n.minutes=e.option.UTC?t.getUTCMinutes():t.getMinutes())},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),e.date.hour.value(t,a),n)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),e.date.hour.value(t,a),n)}},e.date.month={extent:function(){return[1,12]},offset:function(){return 12},start:function(t,n){return n.hourStart||(n.hourStart=e.date.next(e.date.year.value(t,n),val))},end:function(t,n){return n.hourEnd||(n.hourEnd=e.date.prev(e.date.year.value(t,n),val))},value:function(t,n){return n.month||(n.month=e.option.UTC?t.getUTCMonth():t.getMonth())},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),n-1)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),n-1)}},e.date.second={extent:function(){return[0,59]},offset:function(){return 60},start:function(e){return e},end:function(e){return e},value:function(t,n){return n.seconds||(n.seconds=e.option.UTC?t.getUTCSeconds():t.getSeconds())},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),e.date.hour.value(t,a),e.date.minute.value(t,a),n)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a),e.date.hour.value(t,a),e.date.minute.value(t,a),n)}},e.date.time={extent:function(){return["00:00:00","23:59:59"]},offset:function(){return 0},start:function(e){return e},end:function(e){return e},value:function(t,n){return n.time||(n.time=e.date.hour.value(t,n)+":"+e.date.minute.value(t,n)+":"+e.date.second.value(t,n))},next:function(t,n,a){var r=n.split(":");return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a)+(e.date.time.value(t,a)>n?1:0),r[0],r[1],r[2])},prev:function(t,n,a){var r=n.split(":");return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),e.date.day.value(t,a)+(n>e.date.time.value(t,a)?-1:0),r[0],r[1],r[2])}},e.date.weekdayCount={extent:function(t,n){return[1,Math.ceil(e.date.day.extent(t,n)[1]/7)]},offset:function(){return 0},value:function(t,n){return n.weekdaycount||(n.weekdaycount=Math.floor((e.date.day.value(t,n)-1)/7)+1)},next:function(t,n,a){var r=e.date.weekdayCount.value(t,a),u=e.date.year.value(t,a),o=e.date.month.value(t,a);return n>0?e.date.next(u,o+(r>n?1:0),1+7*(n-1)):0===n&&e.date.day.value(t,a)<e.date.day.extent(t,a)[1]-6?e.date.next(u,o,e.date.day.extent(t,a)[1]-6):t},prev:function(t,n,a){var r=e.date.weekdayCount.value(t,a),u=e.date.year.value(t,a),o=e.date.month.value(t,a);return n>0?e.date.next(u,o+(r>n?0:-1),7+7*(n-1)):0===n&&e.date.day.value(t,a)<e.date.day.extent(t,a)[1]-6?e.date.next(u,o,0):t}},e.date.weekday={extent:function(){return[1,7]},offset:function(t,n){return e.date.day.extent(t,n)[1]},start:function(t,n){return e.date.day.start(t,n)},end:function(t,n){return e.date.day.end(t,n)},value:function(t,n){return n.weekday||(n.weekday=e.option.UTC?t.getUTCDay():t.getDay())},next:function(t,n,a){return e.date.day(t,e.date.day.value(t,n)+(n-1)-e.date.weekday.value(t,a),a)},prev:function(t,n,a){return e.date.day(t,e.date.day.value(t,n)+(n-1)-e.date.weekday.value(t,a),a)}},e.date.week={extent:function(t,n){return[1,n.weekCount||(n.weekCount=Math.floor(e.date.day.extent(t,n)[0]/7+1))]},offset:function(t,n){return e.date.week.extent(t,n)[1]},value:function(t,n){return n.week||(n.week=Math.floor(e.date.day.value(t,n)[0]/7+1))},next:function(t,n,a){var r=e.date.week.extent(t,a)[1],u=e.date.day.extent(t,a)[1];return e.date.next(e.date.year.value(t,a),e.date.month.value(t,a),7*(0>n?n+1:n-1)-(inc>r&&6>u?7:0)+(inc===r+1?u+1:0))},prev:function(t,n,a){var r=e.date.week.extent(t,a)[1],u=e.date.day.extent(t,a)[1];return 0===n?e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),0):e.date.prev(e.date.year.value(t,a),e.date.month.value(t,a),7*(0>n?n+1:n-1)-(n>r&&6>u?7:0)+(n===r+1?u+1:0)+6)}},e.date.weekyear={extent:function(t,n){if(n.weekyearCount)return[1,n.weekyearCount];var a=n.firstWeekdayOfYear||(n.firstWeekdayOfYear=e.next.weekday.value(e.date.next(e.date.year.value(t,n),0,1,12,0,0),{})),r=n.lastWeekdayOfYear||(n.lastWeekdayOfYear=e.next.weekday.value(e.date.next(e.date.year.value(t,n)+1,0,0),{}));return[1,n.weekyearCount=4===a||4===r?53:52]},offset:function(t,n){return e.date.weekyear.extent(t,n)[1]},start:function(t,n){return n.weekyearStart||(n.weekyearStart=e.date.next(e.date.year.value(t,n),e.date.month.value(t,n),e.date.day.value(t,n)+4-(e.date.weekday.value(t,n)||7),12))},end:function(t,n){if(n.weekyearEnd)return n.weekyearEnd;var a=e.date.weekyear.start(t,n);return n.weekyearEnd||(n.weekyearEnd=e.date.next(e.date.year.value(a,{}),e.date.month.value(a,{}),e.date.day.value(a,{})+7,12))},value:function(t,n){if(n.weekyear)return n.weekyear;var a=e.date.weekyear.start(t,n),r=e.date.next(e.date.year.value(a,{}),0,1,12);return n.weekyear||(n.weekyear=Math.ceil(((a.getTime()-r.getTime())/e.date.constant.DAY+1)/7))},next:function(t,n,a){var r=e.date.weekyear.start(t,a),u=e.date.weekyear.value(t,a);return e.date.next(e.date.year.value(r,{}),e.date.month.value(r,{}),e.date.day.value(r,{})-3+7*(n-u))},prev:function(t,n,a){var r=e.date.weekyear.start(t,a),u=e.date.weekyear.value(t,a);return e.date.next(e.date.year.value(r,{}),e.date.month.value(r,{}),e.date.day.value(r,{})-3+7*(n-u)+6)}},e.date.yearday={extent:function(t,n){var a=e.date.year.value(t,n),r=n.yeardayCount||(n.yeardayCount=0!==a%4||0===a%100&&0!==a%400?365:366);return[1,r]},offset:function(t,n){return e.date.yearday.extent(t,n)[1]},start:function(t,n){return e.date.year.start(t,n)},end:function(t,n){return e.date.year.end(t,n)},value:function(t,n){if(n.yearday)return n.yearday;var a=[0,31,59,90,120,151,181,212,243,273,304,334],r=e.date.month.value(t,n),u=r>1&&366===e.date.yearday.extent(t,n)[1]?1:0,o=a[r]+e.date.day.value(t,n)+u;return n.yearday=o},next:function(t,n,a){return e.date.next(e.date.year.value(t,a),0,n)},prev:function(t,n,a){return e.date.prev(e.date.year.value(t,a),0,n)}},e.date.year={extent:function(){return[e.option.minYear,e.option.maxYear]},offset:function(){return 0},start:function(t,n){return n.yearStart||(n.yearStart=e.date.next(e.date.year.value(t,n)))},end:function(t,n){return n.yearEnd||(n.yearEnd=e.date.prev(e.date.year.value(t,n)))},value:function(t,n){return n.year||(n.year=e.option.UTC?t.getUTCFullYear():t.getFullYear())},next:function(t,n){return e.date.next(n)},prev:function(t,n){return e.date.prev(n)}},e.date.mod=function(e,t,n){return e>t?n||0:(n||0)>e?t:e},e.parse={},e.parse.cron=function(){function e(e,t){return isNaN(e)?s[e]||null:+e+(t||0)}function t(e){var t,n={};for(t in e)"dc"!==t&&"d"!==t&&(n[t]=e[t].slice(0));return n}function n(e,t,n,a,r){var u=n;for(e[t]||(e[t]=[]);a>=u;)0>e[t].indexOf(u)&&e[t].push(u),u+=r||1}function a(e,a,r,u){(a.d&&!a.dc||a.dc&&0>a.dc.indexOf(u))&&(e.push(t(a)),a=e[e.length-1]),n(a,"d",r,r),n(a,"dc",u,u)}function r(e,t,a){var r={},u={};1===a?(n(t,"D",1,3),n(t,"d",s.MON,s.FRI),n(r,"D",2,2),n(r,"d",s.TUE,s.FRI),n(u,"D",3,3),n(u,"d",s.TUE,s.FRI)):(n(t,"D",a-1,a+1),n(t,"d",s.MON,s.FRI),n(r,"D",a-1,a-1),n(r,"d",s.MON,s.THU),n(u,"D",a+1,a+1),n(u,"d",s.TUE,s.FRI)),e.exceptions.push(r),e.exceptions.push(u)}function u(t,a,r,u,o,i){var d=t.split("/"),f=+d[1],s=d[0];if("*"!==s&&"0"!==s){var v=s.split("-");u=e(v[0],i),o=e(v[1],i)}n(a,r,u,o,f)}function o(t,o,i,d,f,s){var v,l,c=o.schedules,y=c[c.length-1];"L"===t&&(t=d-1),null!==(v=e(t,s))?n(y,i,v,v):null!==(v=e(t.replace("W",""),s))?r(o,y,v):null!==(v=e(t.replace("L",""),s))?a(c,y,v,d-1):2===(l=t.split("#")).length?(v=e(l[0],s),a(c,y,v,e(l[1]))):u(t,y,i,d,f,s)}function i(e){return e.indexOf("#")>-1||e.indexOf("L")>0}function d(e,t){return i(e)&&!i(t)?1:0}function f(e){var t,n,a,r,u={schedules:[{}],exceptions:[]},i=e.split(" ");for(t in v)if(n=v[t],a=i[n[0]],a&&"*"!==a&&"?"!==a){r=a.split(",").sort(d);var f,s=r.length;for(f=0;s>f;f++)o(r[f],u,t,n[1],n[2],n[3])}return u}var s={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12,SUN:1,MON:2,TUE:3,WED:4,THU:5,FRI:6,SAT:7},v={s:[0,0,59],m:[1,0,59],h:[2,0,23],D:[3,1,31],M:[4,1,12],Y:[6,1970,2099],d:[5,1,7,1]};return{parse:function(e,t){var n=e.toUpperCase();return f(t?n:"0 "+n)}}},e.parse.recur=function(){function e(e,s,v){if(e=u?"a"+e:e,t||(l.push({}),t=l[0]),t[e]||(t[e]=[]),n=t[e],r){for(a=[],d=s;v>=d;d+=r)a.push(d);f={n:e,x:r,c:n.length,m:v}}a=o?[s]:i?[v]:a;var c=a.length;for(d=0;c>d;d+=1)0>n.indexOf(a[d])&&n.push(a[d]);a=r=u=o=i=0}var t,n,a,r,u,o,i,d,f,s=[],v=[],l=s;return{schedules:s,exceptions:v,on:function(){return a=arguments[0]instanceof Array?arguments[0]:arguments,this},every:function(e){return r=e,this},after:function(e){return u=!0,a=[e],this},first:function(){return o=1,this},last:function(){return i=1,this},at:function(){a=arguments;for(var t=0,n=a.length;n>t;t++){var r=a[t].split(":");3>r.length&&(a[t]+=":00")}return e("t"),this},afterTime:function(){a=arguments;for(var t=0,n=a.length;n>t;t++){var r=a[t].split(":");3>r.length&&(a[t]+=":00")}return e("ta"),this},beforeTime:function(){a=arguments;for(var t=0,n=a.length;n>t;t++){var r=a[t].split(":");3>r.length&&(a[t]+=":00")}return e("tb"),this},second:function(){return e("s",0,59),this},minute:function(){return e("m",0,59),this},hour:function(){return e("h",0,23),this},dayOfMonth:function(){return e("D",1,i?0:31),this},dayOfWeek:function(){return e("d",1,7),this},onWeekend:function(){return a=[1,7],this.dayOfWeek()},onWeekday:function(){return a=[2,3,4,5,6],this.dayOfWeek()},dayOfWeekCount:function(){return e("dc",1,i?0:5),this},dayOfYear:function(){return e("dy",1,i?0:366),this},weekOfMonth:function(){return e("wm",1,i?0:5),this},weekOfYear:function(){return e("wy",1,i?0:53),this},month:function(){return e("M",1,12),this},year:function(){return e("Y",1970,2450),this},startingOn:function(e){return this.between(e,f.m)},between:function(n,a){return t[f.n]=t[f.n].splice(0,f.c),r=f.x,e(f.n,n,a),this},and:function(){return t=l[l.push({})-1],this},except:function(){return l=v,t=null,this}}},e.parse.text=function(){function t(e,t,n,a){return{startPos:e,endPos:t,text:n,type:a}}function n(e){var n,a,r,u,o,i,d=e instanceof Array?e:[e],f=/\s+/;for(d.push(f),o=g;!n||n.type===f;){i=-1,a=p.substring(o),n=t(o,o,p.split(f)[0]);var s,v=d.length;for(s=0;v>s;s++)u=d[s],r=u.exec(a),r&&0===r.index&&r[0].length>i&&(i=r[0].length,n=t(o,o+i,a.substring(0,i),u));n.type===f&&(o=n.endPos)}return n}function a(e){var t=n(e);return g=t.endPos,t}function r(e){for(var t=+l(e),n=s(m.through)?+l(e):t,a=[],r=t;n>=r;r++)a.push(r);return a}function u(e){for(var t=r(e);s(m.and);)t=t.concat(r(e));return t}function o(e){var t,n,a,r;s(m.weekend)?e.on(x.sun,x.sat).dayOfWeek():s(m.weekday)?e.on(x.mon,x.tue,x.wed,x.thu,x.fri).dayOfWeek():(t=l(m.rank),e.every(t),n=f(e),s(m.start)?(t=l(m.rank),e.startingOn(t),v(n.type)):s(m.between)&&(a=l(m.rank),s(m.and)&&(r=l(m.rank),e.between(a,r))))}function i(e){s(m.first)?e.first():s(m.last)?e.last():e.on(u(m.rank)),f(e)}function d(e){g=0,p=e,y=-1;for(var t=h();p.length>g&&0>y;){var n=v([m.every,m.after,m.onthe,m.on,m.of,m["in"],m.at,m.and,m.except,m.also]);switch(n.type){case m.every:o(t);break;case m.after:t.after(l(m.rank)),f(t);break;case m.onthe:i(t);break;case m.on:t.on(u(m.dayName)).dayOfWeek();break;case m.of:t.on(u(m.monthName)).month();break;case m["in"]:t.on(u(m.yearIndex)).year();break;case m.at:for(t.at(l(m.time));s(m.and);)t.at(l(m.time));break;case m.also:t.and();break;case m.except:t.except();break;default:y=g}}return{schedules:t.schedules,exceptions:t.exceptions,error:y}}function f(e){var t=v([m.second,m.minute,m.hour,m.dayOfYear,m.dayOfWeek,m.dayInstance,m.day,m.month,m.year,m.weekOfMonth,m.weekOfYear]);switch(t.type){case m.second:e.second();break;case m.minute:e.minute();break;case m.hour:e.hour();break;case m.dayOfYear:e.dayOfYear();break;case m.dayOfWeek:e.dayOfWeek();break;case m.dayInstance:e.dayOfWeekCount();break;case m.day:e.dayOfMonth();break;case m.weekOfMonth:e.weekOfMonth();break;case m.weekOfYear:e.weekOfYear();break;case m.month:e.month();break;case m.year:e.year();break;default:y=g}return t}function s(e){var t=n(e).type===e;return t&&a(e),t}function v(e){var t=a(e);return t.type?t.text=c(t.text,e):y=g,t}function l(e){return v(e).text}function c(e,t){var n=e;switch(t){case m.time:var a=e.split(/(:|am|pm)/),r="pm"===a[3]?parseInt(a[0],10)+12:a[0],u=a[2].trim();n=(1===r.length?"0":"")+r+":"+u;break;case m.rank:n=parseInt(/^\d+/.exec(e)[0],10);break;case m.monthName:case m.dayName:n=x[e.substring(0,3)]}return n}var y,h=e.parse.recur,g=0,p="",m={eof:/^$/,rank:/^((\d\d\d\d)|([2-5]?1(st)?|[2-5]?2(nd)?|[2-5]?3(rd)?|(0|[1-5]?[4-9]|[1-5]0|1[1-3])(th)?))\b/,time:/^((([0]?[1-9]|1[0-2]):[0-5]\d(\s)?(am|pm))|(([0]?\d|1\d|2[0-3]):[0-5]\d))\b/,dayName:/^((sun|mon|tue(s)?|wed(nes)?|thu(r(s)?)?|fri|sat(ur)?)(day)?)\b/,monthName:/^(jan(uary)?|feb(ruary)?|ma((r(ch)?)?|y)|apr(il)?|ju(ly|ne)|aug(ust)?|oct(ober)?|(sept|nov|dec)(ember)?)\b/,yearIndex:/^(\d\d\d\d)\b/,every:/^every\b/,after:/^after\b/,second:/^(s|sec(ond)?(s)?)\b/,minute:/^(m|min(ute)?(s)?)\b/,hour:/^(h|hour(s)?)\b/,day:/^(day(s)?( of the month)?)\b/,dayInstance:/^day instance\b/,dayOfWeek:/^day(s)? of the week\b/,dayOfYear:/^day(s)? of the year\b/,weekOfYear:/^week(s)?( of the year)?\b/,weekOfMonth:/^week(s)? of the month\b/,weekday:/^weekday\b/,weekend:/^weekend\b/,month:/^month(s)?\b/,year:/^year(s)?\b/,between:/^between (the)?\b/,start:/^(start(ing)? (at|on( the)?)?)\b/,at:/^(at|@)\b/,and:/^(,|and\b)/,except:/^(except\b)/,also:/(also)\b/,first:/^(first)\b/,last:/^last\b/,"in":/^in\b/,of:/^of\b/,onthe:/^on the\b/,on:/^on\b/,through:/(-|^(to|through)\b)/},x={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7,"1st":1,fir:1,"2nd":2,sec:2,"3rd":3,thi:3,"4th":4,"for":4};return{parse:function(e){return d(e.toLowerCase())}}},e.range={},e.range.isValid=function(e,t,n,a){return t.indexOf(e)>-1||a&&e===n&&t.indexOf(0)>-1},e.range.next=function(e,t,n){for(var a,r=null,u=t[0],o=t.length;o--;){if(a=t[o],a===e)return e;u=u>a?a:u,r=a>e&&(!r||r>a)?a:r}return r||(void 0===n?u:u+n)},e.range.nextInvalid=function(t,n,a,r,u){var o=a[0],i=a[1];if(e.range.isValid(t,n,i,u)){var d=t;do t=e.date.mod(t+1,i,o);while(t!==d&&e.range.isValid(t,n,i,u));return t===d?void 0:t>d?t:t+r}return!1},e.range.prev=function(e,t,n){for(var a,r=null,u=t.length,o=t[u-1];u--;){if(a=t[u],a===e)return e;o=a>o?a:o,r=e>a&&(!r||a>r)?a:r}return null!==r?r:void 0===n?o:o-n},e.range.prevInvalid=function(t,n,a,r,u){var o=a[0],i=a[1];if(e.range.isValid(t,n,i,u)){var d=t;do t=e.date.mod(t-1,i,o);while(t!==d&&e.range.isValid(t,n,i,u));return t===d?void 0:d>t?t:t-r}return!1},e}();